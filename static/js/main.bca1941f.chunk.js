(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{28:function(e,t){e.exports={alphaToken:"9M3X6KD7CIY0ILTF"}},41:function(e,t,a){e.exports=a(70)},46:function(e,t,a){},70:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(21),l=a.n(o),c=(a(46),a(8)),s=a(9),i=a(11),u=a(10),m=a(3),p=a(2),d=a(14),h=a(15),E=a.n(h),f=function(e){e?E.a.defaults.headers.common.Authorization=e:delete E.a.defaults.headers.common.Authorization},v=a(23),b=function(e){return{type:"SET_CURRENT_USER",payload:e}},g=function(){return function(e){localStorage.removeItem("jwtToken"),f(!1),e(b({}))}},y=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleLogout=function(t){t.preventDefault(),e.props.logoutUser(),e.props.history.push("/")},e}return Object(s.a)(a,[{key:"render",value:function(){if(this.props.auth.isAuthenticated){var e=this.props.auth.user;return r.a.createElement("nav",{className:"nav-wrapper",style:{backgroundColor:"#057481"}},r.a.createElement("div",{className:"container"},r.a.createElement(m.b,{to:"/",className:"brand-logo"},"Pocket Stocks"),r.a.createElement("ul",{className:"right"},r.a.createElement("li",null,"Welcome, ",e.name),r.a.createElement("li",null,r.a.createElement(m.c,{to:"/portfolio"},"Portfolio")),r.a.createElement("li",null,r.a.createElement(m.c,{to:"/transactions"},"Transactions")),r.a.createElement("button",{className:"btn btn-large waves-effect waves-light hoverable",style:{backgroundColor:"#f49f0a"},onClick:this.handleLogout},"Logout"))))}return r.a.createElement("nav",{className:"nav-wrapper",style:{backgroundColor:"#057481"}},r.a.createElement("div",{className:"container"},r.a.createElement(m.b,{to:"/",className:"brand-logo"},"Pocket Stocks"),r.a.createElement("ul",{className:"right"},r.a.createElement("li",null,r.a.createElement(m.c,{to:"/portfolio"},"Portfolio")),r.a.createElement("li",null,r.a.createElement(m.c,{to:"/transactions"},"Transactions")))))}}]),a}(n.Component),w=Object(d.b)((function(e){return{auth:e.auth}}),{logoutUser:g})(Object(p.e)(y)),N=function(){return r.a.createElement("div",{className:"container"},r.a.createElement("h4",{className:"center"},"Welcome!"),r.a.createElement("div",{className:"center"},r.a.createElement(m.b,{to:"/login"},"Login ")),r.a.createElement("div",{className:"center"},r.a.createElement(m.b,{to:"/register"},"Sign Up")))},k=a(16),O=a(13),j=a.n(O),C=a(28),S=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={ticker:null,quantity:null,errors:{}},e.handleChange=function(t){e.setState(Object(k.a)({},t.target.id,t.target.value))},e.handleSubmit=function(t){t.preventDefault();var a=e.props.auth.user,n="https://www.alphavantage.co/query?function=SYMBOL_SEARCH&keywords=".concat(e.state.ticker,"&apikey=").concat(C.alphaToken);E.a.get(n).then((function(t){if(0===t.data.bestMatches.length){e.setState({errors:{ticker:"Invalid ticker"}})}else{var n="https://www.alphavantage.co/query?function=GLOBAL_QUOTE&symbol=".concat(e.state.ticker,"&apikey=").concat(C.alphaToken);E.a.get(n).then((function(t){console.log(t.data);var n=t.data["Global Quote"]["05. price"]*e.state.quantity;if(a.balance<n){e.setState({errors:{quantity:"You do not have a high enough balance to purchase this"}})}else{var r=a.balance-n,o={id:a.id,balance:r,ticker:e.state.ticker,quantity:e.state.quantity,price:t.data["Global Quote"]["05. price"]};E.a.post("/api/users/buy",o).then((function(t){return e.props.history.push("/portfolio")})).catch((function(e){return console.log(e)}))}})).catch((function(e){return console.log(e)}))}})).catch((function(e){return console.log(e)}))},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this.state.errors,t=this.props.auth.user;return this.props.auth.isAuthenticated?r.a.createElement("div",{className:"container"},"Portfolio",r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s6"}),r.a.createElement("div",{className:"col s6"},r.a.createElement("h3",null,"Cash - $",t.balance),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("label",{htmlFor:"ticker"},"Ticker:"),r.a.createElement("input",{type:"text",id:"ticker",onChange:this.handleChange,error:e.ticker,className:j()("",{invalid:e.ticker||e.tickernotfound})}),r.a.createElement("span",{className:"red-text"},e.ticker,e.tickernotfound)),r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("label",{htmlFor:"quantity"},"Quantity:"),r.a.createElement("input",{type:"number",id:"quantity",onChange:this.handleChange,error:e.quantity,className:j()("",{invalid:e.quantity||e.quantityincorrect})}),r.a.createElement("span",{className:"red-text"},e.quantity,e.quantityincorrect)),r.a.createElement("div",{className:"center input-field col s12"},r.a.createElement("button",{className:"btn btn-large",style:{backgroundColor:"#057481"}},"Buy")))))):r.a.createElement("div",{className:"container center"},"You need to make an account to access your portfolio!",r.a.createElement("div",null,r.a.createElement(m.b,{to:"/login"},"Login ")),r.a.createElement("div",null,r.a.createElement(m.b,{to:"/register"},"Register ")))}}]),a}(n.Component),R=Object(d.b)((function(e){return{auth:e.auth}}))(Object(p.e)(S)),T=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},"Transactions")}}]),a}(n.Component),x=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={email:null,password:null,errors:{}},e.handleChange=function(t){e.setState(Object(k.a)({},t.target.id,t.target.value))},e.handleSubmit=function(t){t.preventDefault();var a={email:e.state.email,password:e.state.password};e.props.loginUser(a)},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/portfolio")}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.auth.isAuthenticated&&this.props.history.push("/portfolio"),e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){var e=this.state.errors;return r.a.createElement("div",{className:"container"},r.a.createElement("h4",{className:"center"},"Login!"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("label",{htmlFor:"email"},"Email:"),r.a.createElement("input",{type:"text",id:"email",onChange:this.handleChange,error:e.email,className:j()("",{invalid:e.email||e.emailnotfound})}),r.a.createElement("span",{className:"red-text"},e.email,e.emailnotfound)),r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("label",{htmlFor:"password"},"Password:"),r.a.createElement("input",{type:"password",id:"password",onChange:this.handleChange,error:e.password,className:j()("",{invalid:e.password||e.passwordincorrect})}),r.a.createElement("span",{className:"red-text"},e.password,e.passwordincorrect)),r.a.createElement("div",{className:"center input-field col s12"},r.a.createElement("button",{className:"btn btn-large",style:{backgroundColor:"#057481"}},"Login"))))}}]),a}(n.Component),A=Object(d.b)((function(e){return{auth:e.auth,errors:e.errors}}),{loginUser:function(e){return function(t){E.a.post("/api/users/login",e).then((function(e){var a=e.data.token;localStorage.setItem("jwtToken",a),f(a);var n=Object(v.a)(a);t(b(n))})).catch((function(e){return t({type:"GET_ERRORS",payload:e.response.data})}))}}})(x),U=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={name:null,email:null,password:null,password2:null,errors:{},balance:5e3},e.handleChange=function(t){e.setState(Object(k.a)({},t.target.id,t.target.value))},e.handleInputChange=function(t){e.setState(Object(k.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){t.preventDefault();var a={name:e.state.name,email:e.state.email,password:e.state.password,password2:e.state.password2,balance:e.state.balance};e.props.registerUser(a,e.props.history)},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/portfolio")}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){var e=this.state.errors;return r.a.createElement("div",{className:"container"},r.a.createElement("h4",{className:"center"},"Register!"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("label",{htmlFor:"name"},"Name:"),r.a.createElement("input",{type:"text",id:"name",onChange:this.handleChange,error:e.name,className:j()("",{invalid:e.name})}),r.a.createElement("span",{className:"red-text"},e.name))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("label",{htmlFor:"email"},"Email:"),r.a.createElement("input",{type:"email",id:"email",onChange:this.handleChange,error:e.email,className:j()("",{invalid:e.email})}),r.a.createElement("span",{className:"red-text"},e.email))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("label",{htmlFor:"password"},"Password:"),r.a.createElement("input",{type:"password",id:"password",onChange:this.handleChange,error:e.password,className:j()("",{invalid:e.password})}),r.a.createElement("span",{className:"red-text"},e.password))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("label",{htmlFor:"password2"},"Confirm Password:"),r.a.createElement("input",{type:"password",id:"password2",onChange:this.handleChange,error:e.password2,className:j()("",{invalid:e.password2})}),r.a.createElement("span",{className:"red-text"},e.password2))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"center input-field col s12"},r.a.createElement("button",{className:"btn",style:{backgroundColor:"#057481"}},"Register")))))}}]),a}(n.Component),q=Object(d.b)((function(e){return{auth:e.auth,errors:e.errors}}),{registerUser:function(e,t){return function(a){E.a.post("/api/users/register",e).then((function(e){return t.push("/login")})).catch((function(e){return a({type:"GET_ERRORS",payload:e.response.data})}))}}})(Object(p.e)(U)),L=a(17),_=a(40),F=a(20),P=a(69),D={isAuthenticated:!1,user:{},loading:!1},I={},G=Object(L.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_USER":return Object(F.a)(Object(F.a)({},e),{},{isAuthenticated:!P(t.payload),user:t.payload});case"USER_LOADING":return Object(F.a)(Object(F.a)({},e),{},{loading:!0});default:return e}},errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ERRORS":return t.payload;default:return e}}}),W=[_.a],B=Object(L.e)(G,{},Object(L.d)(L.a.apply(void 0,W)));if(localStorage.jwtToken){var M=localStorage.jwtToken;f(M);var Q=Object(v.a)(M);B.dispatch(b(Q));var Y=Date.now()/1e3;Q.exp<Y&&(B.dispatch(g()),window.location.href="./login")}var z=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement(m.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(w,null),r.a.createElement(p.a,{exact:!0,path:"/",component:N}),r.a.createElement(p.a,{exact:!0,path:"/portfolio",component:R}),r.a.createElement(p.a,{exact:!0,path:"/transactions",component:T}),r.a.createElement(p.a,{exact:!0,path:"/login",component:A}),r.a.createElement(p.a,{exact:!0,path:"/register",component:q})))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(d.a,{store:B},r.a.createElement(z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[41,1,2]]]);
//# sourceMappingURL=main.bca1941f.chunk.js.map